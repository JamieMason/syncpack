"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[461],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=l(n),u=r,k=d["".concat(s,".").concat(u)]||d[u]||m[u]||i;return n?a.createElement(k,o(o({ref:t},c),{},{components:n})):a.createElement(k,o({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[d]="string"==typeof e?e:r,o[1]=p;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5227:(e,t,n)=>{n.d(t,{ZP:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={toc:[]},o="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(o,(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Value"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Property in package.json"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"dev")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#devDependencies"},(0,r.kt)("inlineCode",{parentName:"a"},"devDependencies")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"overrides")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#overrides"},(0,r.kt)("inlineCode",{parentName:"a"},"overrides")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"peer")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#peerDependencies"},(0,r.kt)("inlineCode",{parentName:"a"},"peerDependencies")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"pnpmOverrides")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://pnpm.io/package_json#pnpmoverrides"},(0,r.kt)("inlineCode",{parentName:"a"},"pnpm.overrides")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"prod")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#dependencies"},(0,r.kt)("inlineCode",{parentName:"a"},"dependencies")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"resolutions")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#resolutions"},(0,r.kt)("inlineCode",{parentName:"a"},"resolutions")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"workspace")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#version"},(0,r.kt)("inlineCode",{parentName:"a"},"version")))))))}p.isMDXComponent=!0},7029:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294);const r={pill:"pill_lx6J",gray:"gray_oDNb",red:"red_TkSj",yellow:"yellow_uZjQ",green:"green_VuIk",blue:"blue_niGL",indigo:"indigo_t1co",purple:"purple_wWQZ",pink:"pink_hjd3"};function i(e){let{required:t,optional:n}=e;return a.createElement("p",null,t&&a.createElement("span",{className:`${r.pill} ${r.red}`},"Required"),n&&a.createElement("span",{className:`${r.pill} ${r.gray}`},"Optional"))}},7056:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));n(7029),n(5227);const i={id:"version-groups",title:"Version Groups"},o=void 0,p={unversionedId:"guide/version-groups",id:"guide/version-groups",title:"Version Groups",description:"See also the versionGroups Configuration API.",source:"@site/docs/guide/version-groups.mdx",sourceDirName:"guide",slug:"/guide/version-groups",permalink:"/syncpack/guide/version-groups",draft:!1,editUrl:"https://github.com/JamieMason/syncpack/tree/master/site/docs/guide/version-groups.mdx",tags:[],version:"current",lastUpdatedBy:"Jamie Mason",lastUpdatedAt:1677001152,formattedLastUpdatedAt:"Feb 21, 2023",frontMatter:{id:"version-groups",title:"Version Groups"},sidebar:"docs",previous:{title:"Syncpack GitHub Action",permalink:"/syncpack/github-action"},next:{title:"Troubleshooting",permalink:"/syncpack/guide/troubleshooting"}},s={},l=[{value:"Overview",id:"overview",level:2},{value:"Example use cases",id:"example-use-cases",level:2},{value:"Incompatible packages using the same framework",id:"incompatible-packages-using-the-same-framework",level:3},{value:"How groups are assigned",id:"how-groups-are-assigned",level:2}],c={toc:l},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"See also the ",(0,r.kt)("a",{parentName:"p",href:"/syncpack/config/version-groups"},"versionGroups Configuration API"),".")),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Syncpack helps you find and fix inconsistencies between every dependency defined\nthroughout your monorepo's package.json files. Version Groups create partitions\nwhere dependencies inside each group can be internally consistent, without\naffecting the other groups."),(0,r.kt)("p",null,"Version Groups let you handle special cases or provide more specific rules for\nwhat to do in certain situations."),(0,r.kt)("p",null,"They're best understood by looking at some example use cases."),(0,r.kt)("h2",{id:"example-use-cases"},"Example use cases"),(0,r.kt)("h3",{id:"incompatible-packages-using-the-same-framework"},"Incompatible packages using the same framework"),(0,r.kt)("p",null,"A 3rd party framework has had a major update which requires breaking changes but\nsome of your packages can't easily be upgraded and will need to remain on an\nolder version, while the rest are able to upgrade today."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You ",(0,r.kt)("strong",{parentName:"li"},"don't")," want mismatches between your packages using the latest version\nof the framework - they should all use eg. ",(0,r.kt)("inlineCode",{parentName:"li"},"next@13.1.6")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"react@18.2.0"),"."),(0,r.kt)("li",{parentName:"ol"},"You ",(0,r.kt)("strong",{parentName:"li"},"don't")," want mismatches between the packages using the old version -\nthey should all use eg. ",(0,r.kt)("inlineCode",{parentName:"li"},"next@11.1.4")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"react@17.0.2"),"."),(0,r.kt)("li",{parentName:"ol"},"You ",(0,r.kt)("strong",{parentName:"li"},"do")," want those groups to use ",(0,r.kt)("strong",{parentName:"li"},"different versions to each other")," and\nnot have Syncpack make them all the same."),(0,r.kt)("li",{parentName:"ol"},"You only have this problem with ",(0,r.kt)("inlineCode",{parentName:"li"},"next")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"react"),", other dependencies can\ncontinue to be kept consistent with each other throughout the full monorepo.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Allow different versions of just these dependencies, in these packages only"',title:'"Allow',different:!0,versions:!0,of:!0,just:!0,these:!0,"dependencies,":!0,in:!0,packages:!0,'only"':!0},'{\n  "versionGroups": [\n    {\n      "dependencies": ["next", "react", "react-dom"],\n      "packages": ["@stricken/server", "@stricken/ui"],\n      "label": "These packages are stuck on next@11 for now"\n    }\n  ]\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Syncpack will make ensure that:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"The versions of ",(0,r.kt)("inlineCode",{parentName:"li"},"next")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"react")," are the same between ",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/server"),"\nand ",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/ui"),"."),(0,r.kt)("li",{parentName:"ol"},"The versions of ",(0,r.kt)("inlineCode",{parentName:"li"},"next")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"react")," are the same across every package\n",(0,r.kt)("strong",{parentName:"li"},"except")," ",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/server")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/ui"),"."),(0,r.kt)("li",{parentName:"ol"},"The versions of ",(0,r.kt)("inlineCode",{parentName:"li"},"next")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"react")," between ",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/server")," and\n",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/ui")," can be different to the other packages in the monorepo."),(0,r.kt)("li",{parentName:"ol"},"The versions of every ",(0,r.kt)("strong",{parentName:"li"},"other")," dependency in the monorepo (eg ",(0,r.kt)("inlineCode",{parentName:"li"},"lodash"),") are\nthe same across every package ",(0,r.kt)("strong",{parentName:"li"},"including")," ",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/server")," and\n",(0,r.kt)("inlineCode",{parentName:"li"},"@stricken/ui"),"."))),(0,r.kt)("h2",{id:"how-groups-are-assigned"},"How groups are assigned"),(0,r.kt)("p",null,"Each dependency can only belong to one version group, the first group which\nmatches a given dependency will apply."),(0,r.kt)("p",null,"You can be quite granular with these rules, so the partitioning doesn't ",(0,r.kt)("em",{parentName:"p"},"have"),"\nto apply to an entire package:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A specific dependency in a specific part of a specific package."),(0,r.kt)("li",{parentName:"ul"},"A specific dependency in a specific package."),(0,r.kt)("li",{parentName:"ul"},"A specific dependency in some specific packages only."),(0,r.kt)("li",{parentName:"ul"},"Any dependency who name matches a pattern such as ",(0,r.kt)("inlineCode",{parentName:"li"},"@aws-sdk/**"),".")),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/syncpack/config/semver-groups"},(0,r.kt)("inlineCode",{parentName:"a"},"semverGroups"))," for more examples, they work\nthe same way."))}m.isMDXComponent=!0}}]);